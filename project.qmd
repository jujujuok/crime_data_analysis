---
title: "Crime Data Analysis"
author: "Ju & Tim"
date: today
format: html
---

# Crime Data Analysis

Data: <https://catalog.data.gov/dataset/crime-data-from-2020-to-present>

About Data: <https://data.lacity.org/Public-Safety/Crime-Data-from-2020-to-Present/2nrs-mtv8/about_data>

Anmerkung: Mögliche Ungenauigkeiten, da die Daten von Papier Akten übertragen wurden

OCC = Occurrence

## 1. Definition/Formulierung der Fragestellung

-   Welche Klassen von Straftaten werden wie häufig begangen?
    -   Anzahl Proportional zu Schweregrad
    -   Viele Diebstahle & andere Straftaten um Geld zu beschaffen
-   Welche Stadtteile sind besonders betroffen?
    -   Ärmere Stadtteile
    -   Stadtteile mit Gang Gebieten
-   Welche Stadtteile haben besonders viele Straftaten mit Gang Einfluss?
    -   Kenne mich zu schlecht in LA aus
    -   Nicht Downtown & Beverly Hills (wohlhabendere Gegenden)
-   Welche Bevölkerungsgruppe ist am meisten gefährdet? (Abhängig von Alter, Geschlecht, Abstammung)
    -   Junge Männer Schwarzer/Hispanischer Abstammung (weniger Wohlhaben + Gangs)
    -   Junge weiße Frauen bei Sexualstraftaten
-   Gibt es besonders Gefährliche Arten von Orten (\[Premise Desc\])
    -   Motels, Parking Lot, Street
    -   Internet aka. Cyberspace
-   Welche Arten von Waffen wird am meisten genutzt?
    -   Meistens nur unbewaffnet
    -   Recht viele Schusswaffen
-   Wie viel Prozent haben zu Verhaftungen (und welcher Art) geführt?
    -   Hoffentlich über 80%
-   Gibt es zeitliche Rahmen in denen mehr oder weniger Verbrechen geschehen?
    -   Am meisten am Abend/in der Nacht
    -   Anfang/Ende des Monats mehr Diebstahl/Raub? --\> Gehalt auszahlung Diebstahl usw.?
    -   Wochenenden -\> Party etc
    -   Sommer -\> Menschen drehen bei Hitze durch
    -   Dunkle Jahreszeiten -\> Schutz in der Dunkelheit
-   Wie effektiv ist die LAPD bei der Aufklärung verschiedener Arten von Straftaten?
    -   Straftaten mit direktem Opfer mehr (Zeugen vorhanden)
-   Welche Straftaten werden häufig am Anfang/Ende des Monats begangen?
    -   Gehalt auszahlung Diebstahl usw.?
-   Wie hat sich die Kriminalität über die 3 Jahre verändert?
    -   In Corona deutlich abgenommen, ansonsten zugenommen
-   Wie häufig werden welche Bevölkerungsgruppen angezeigt / vgl zu wie viele Leute welcher Bevölkerungsgruppe wohnen dort?
    -   Nicht in Datensatz glaube

## 2. Laden der Daten

::: {.callout-note icon="false"}
## Aufgabenstellung (10 Pkt.)

Laden Sie die Daten in die R-Sitzung und verschaffen Sie sich einen ersten Überblick

-   Welche Typen sind enthalten?

-   Ist sichergestellt, dass alle Daten den richtigen Typ haben?

-   Haben die Daten irgendwelche "Seltsamkeiten" mit denen Sie umgehen müssen, wie z.B. anders codierte `NA`'s, mehrere Tabellen, ... etc.

-   Je nach Datensatz können Sie die Daten auch in eine Datenbank laden und dann auf diese in R zugreifen.

Beschreiben Sie, was Sie tun müssen, bevor Sie die Daten im nächsten Abschnitt aufbereiten und bearbeiten können!
:::

```{r}
rm(list=ls())

# Laden der Daten
library(readr) rm(list=ls())
crimes.df.raw <- read_csv('Crime_Data_from_2020_to_Present.csv') 
head(crimes.df.raw)
```

```{r}
codes_to_numeric <- function(x) {
  if (is.na(x)) {
    return(NA)
  } else {
    return(as.numeric(strsplit(x, " ")[[1]]))
  }
}

crimes.df <- transform(crimes.df.raw,
    `Date Rptd` = as.Date(substr(`Date Rptd`, 1, 10), format = "%m/%d/%Y"),
    `DATE OCC` = as.Date(substr(`DATE OCC`, 1, 10), format = "%m/%d/%Y"),
    `TIME OCC` = as.integer(`TIME OCC`),
    `AREA` = as.integer(`AREA`),
    `Rpt Dist No` = as.integer(`Rpt Dist No`),
    `Crm Cd` = as.integer(`Crm Cd`),
    `Mocodes` = lapply(Mocodes, codes_to_numeric)
)

head(crimes.df)
```

## 3. Transformation & Bearbeitung

::: {.callout-note icon="false"}
## Aufgabenstellung (15 Pkt.)

-   Umcodierung von Daten, z.B. numerisch in kategorial

-   Subsetting der Daten

-   Joining von Datentabellen - falls nötig. Welcher Join ist notwendig? Warum?

-   Übersicht der transformierten Daten. Sie können hierzu Hilfsmittel wie `glimpse()`, `skim()` und `head()` benutzen, um Ihre Erläuterungen zu veranschaulichen.

Sind die sich ergebenden Daten so, wie Sie es erwartet haben? Warum oder warum nicht?
:::

```{r}
library(tidyr)

mocodes.df.dirty <- read_delim("MO_CODES_Numerical_20191119.txt",
                 delim = "\\s+",
                 col_names = c("CodeBeschreibung"),
                 trim_ws = TRUE)

mocodes.df <- mocodes.df.dirty %>%
  separate(CodeBeschreibung,
           into = c("Code", "Beschreibung"),
           sep = "(?<=[0-9])\\s+",
           extra = "merge")

head(mocodes.df)
```

```{r}
crimes.df <- crimes.df[-24] # Crm Cd 4 is only NA
```

```{r}
crimes.df
```

## 4. Geeignete Visualisierung und Aggregation der Daten

::: {.callout-note icon="false"}
## Aufgabenstellung (15 Pkt.)

Fassen Sie die Daten in einer geeigenten Form zur Beantwortung Ihrer formulierten Fragestellung zusammen. Ziehen Sie auch geeignete Visualisierungen der transformierten und/oder aggregierten Daten heran, um Ihre Aussagen entsprechend zu untermauern oder zu veranschaulichen.

Hier könne Sie auch geeignete statistische Verfahren bzw. Modellierungen nutzen, falls diese Ihnen bezüglich Ihrer Fragestellung weiterhelfen.
:::

## 5. Zusammenfassung und Schlussfolgerung

::: {.callout-note icon="false"}
## Aufgabenstellung (10 Pkt.)

Fassen Sie hier Ihre Fragestellung und Ihre Erkenntnisse aus Ihrer Analyse zusammen.

Sind Ihre Erkenntnisse das, was Sie erwartet haben? Warum oder warum nicht?
:::

## Quellenverzeichnis
